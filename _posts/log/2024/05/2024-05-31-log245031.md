---
layout: post
title: ' 실서버 배포 문제 (2) '
subtitle: ' 2024년 5월 31일 금요일 '
catalog: true
category: log
subcategory: weekly
tags:
  - log
  - weekly
  - may
  - 2024

---

# Today I Learned

## 날짜

2024년 5월 31일 금요일

## 내용

### 실서버에서 놓친 부분

 아침에 갑자기 리뷰 작성페이지가 열리지 않는 것, 리뷰와 평점이 상품과 함께 나타나지 않는다는 이슈가 생겼다. 헐레벌떡 알아보니 메타필드가 문제였다. 메타필드에는 shop_access_code가 저장된다. 이번에 새로운 앱을 추가하면서 shop_access_code를 6글자에서 8글자로 변경했다. 메타필드는 업데이트 해주지 않았는데, 테스트 서버에서 큰 이상이 없었기 떄문이다. 또한 혹시나 싶은 마음에 항상 access_code를 처리할 때 6글자면 8글자로 바꾸어 인식하도록 추가해놨었다. 그런데 실서버에서만 문제가 됐다. 커맨드를 몰려 모든 샵들의 메타필드에서 샵액세스코드를 6글자에서 8글자로 업데이트해주었다.

 리뷰 작성페이지는 제대로 작동했지만 리뷰 갯수와 평점 모듈은 나타나지 않았다. 사실 전혀 별개의 문제였었다. 이슈가 터진 스토어가 직접 커스터마이징한 테마를 쓰고 있었다. 들어가야할 부분의 이름(card-product)을 탐색하여 리뷰 갯수 및 평점 스니펫이 들어갈 자리를 찾아야 했는데, 이건 쇼피파이 디폴트 테마를 기준으로 한다. 다른 테마를 쓰니 넣어야 할 부분을 탐색하지 못해 들어가지 않았다. 따로 수동으로 설치해주어야 할듯 하다.

 테마나 리퀴드를 요청으로 받아와 정말 안들어간건지 확인할수야 있지만, 구조가 다른 테마인 만큼 얼마나 가져와야할지 미지수라 시도하지 않았다. 이참에 리퀴드 구조를 가져오는 모듈을 만들어봐야하나..

## 회고

늦잠자고싶다.