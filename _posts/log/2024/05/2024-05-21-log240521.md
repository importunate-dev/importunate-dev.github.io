---
layout: post
title: ' jsdeliver 폭파사건 '
subtitle: ' 2024년 5월 21일 화요일 '
catalog: true
category: log
subcategory: weekly
tags:
  - log
  - weekly
  - may
  - 2024
  - jsdeliver

---

# Today I Learned

## 날짜

2024년 5월 21일 화요일

## 내용

### 사건사고(?) 백서

그동안 사내 다른 사버스들에서 발생했던 중대한 문제들에 대한 백서 공유 시간이 있었다. 자세히 이야기하자면 길지만 서버 문제로 고객사들의 스토어에 문제가 생겨서 발생한 문제들이었다. 사실 jsdeliver가 작동하지 않았을 때, FastAPI에서 자동으로 생성해주는 swagger UI 문서가 제대로 뜨지 않고, 내 개인 블로그도 고장나서 알게 되었다. 우리 글로벌 서비스의 위젯도 작동하지 않았지만 다행히 문제제기는 없었다. 문제가 있었던 오전 9시부터 11시는 미국 LA 기준으로 오후 5시부터 7시 쯤이니 잘 몰랐던 건 아닐까! 나중에 백서 쓸일이 없었으면 좋겠다.

### 브라우저부스터 요청시간

어드민에서 브라우저부스터에 관련된 설정을 업데이트하면, 쇼피파이에서 기존 프라이스룰을 모두 삭제하고 새롭게 다시 만들도록 구현했다. 방식은 간편했으나 문제는 간단한 업데이트에도 요청 시간이 다소 길었다. 나야 쇼피파이랑 통신하느라 오래걸리는구나~ 하겠지만 고객입장에선 답답하겠다 싶었다. 다소 케이스가 복잡하긴 하지만, 필요한 만큼만 업데이트 하도록 바꿨다. 프라이스룰에 적용되야 할 할인율, 할인을 위한 최소 가격, 최소 가격 설정 여부 라는 3가지 옵션에 변경점이 있을때만 “수정”하도록 했다. 프라이스룰은 고객이 참여할 수 있는 최대 횟수만큼 생성되어야 하므로, 이 설정값이 변경될 때 알맞게 삭제되거나 추가하도록 변경했다.

## 회고

브라우저 부스터 마무리하는 시점에 문서화 작업을 해야하는데 엄두가 안난다!