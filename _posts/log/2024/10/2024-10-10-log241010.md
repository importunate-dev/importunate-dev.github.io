---
layout: post
title: ' uselist, passive_delete, cascade '
subtitle: ' 2024ë…„ 10ì›” 10ì¼ ëª©ìš”ì¼ '
catalog: true
category: log
subcategory: weekly
tags:
  - log
  - weekly
  - october
  - 2024
  - postgresql
  - uselist
  - passive_delete
  - cascade

---

# Today I Learned

## ë‚ ì§œ

2024ë…„ 10ì›” 10ì¼ ëª©ìš”ì¼

## ë‚´ìš©

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ì˜ ì˜ë¯¸

 ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê³ ë¯¼ì´ ìƒê²¼ë‹¤.

ì˜¤ë¥¸ìª½ì— ìˆëŠ” ë„¤ì´ë²„ ê´€ë ¨ëœ ë¶€ë¶„ì„ ì‘ì„±í•´ì•¼ í–ˆëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼í–ˆë‹¤.

1. ë„¤ì´ë²„ ìŠ¤í† ì–´ëŠ” ì—¬ëŸ¬ê°œì˜ ë„¤ì´ë²„ ì´ë¯¸ì§€ ë°°ë„ˆë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
2. ë„¤ì´ë²„ ì´ë¯¸ì§€ ë°°ë„ˆëŠ” í•˜ë‚˜ì˜ ë„¤ì´ë²„ ìƒí’ˆê³¼ ê´€ë ¨ë  ìˆ˜ ìˆë‹¤.
3. ë„¤ì´ë²„ ì´ë¯¸ì§€ ë°°ë„ˆëŠ” ë‹¤ìˆ˜ì˜ ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œê¸€ê³¼ ê´€ë ¨ë  ìˆ˜ ìˆë‹¤.
4. ë„¤ì´ë²„ ìƒí’ˆê³¼ ë„¤ì´ë²„ ì´ë¯¸ì§€ ë°°ë„ˆëŠ” ë„¤ì´ë²„ ìŠ¤í† ì–´ì˜ ìì‹í…Œì´ë¸”ì´ë‹¤.
5. ì¤‘ë³µëœ ë°ì´í„° ìƒì„±ì€ ìµœëŒ€í•œ ë°©ì§€í•œë‹¤.
6. ì´ë¯¸ì§€ ë°°ë„ˆ ë°ì´í„°ê°€ ì‚­ì œë˜ë”ë¼ë„ ë„¤ì´ë²„ ìƒí’ˆê³¼ ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œê¸€ ë°ì´í„°ëŠ” ì‚­ì œë˜ì„  ì•ˆëœë‹¤.

 ì–´ë µë‹¤.. ì‚¬ì‹¤ 5ë²ˆë§Œ ë¬´ì‹œ(?) í•œë‹¤ë©´ ì¼ì€ í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤. ê·¸ëƒ¥ ë„¤ì´ë²„ ë°°ë„ˆì´ë¯¸ì§€ í…Œì´ë¸” ë°‘ì—ë‹¤ê°€ ì¤‘ë³µëœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì„ 2ê°œ ë§Œë“¤ê³  ê´€ê³„ê°€ ìƒì„±ë˜ë©´ ë³µë¶™í•´ì„œ ë„£ì–´ì£¼ë©´ ëœë‹¤. í•˜ì§€ë§Œ ì¤‘ë³µëœ ë°ì´í„°ëŠ” íš¨ìœ¨ì„±ì´ë‚˜ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ì˜ ë¬¸ì œë„ ìˆì§€ë§Œ ë°ì´í„° ë¬´ê²°ì„±ê³¼ë„ ì—°ê´€ì´ ìˆë‹¤. ë˜‘ê°™ì€ ë°ì´í„°ê°€ 2ê°œ ìˆì„ ë•Œ, í•˜ë‚˜ê°€ ì‚­ì œë˜ë©´ ë°˜ë“œì‹œ ë‹¤ë¥¸ í•˜ë‚˜ê°€ ì‚­ì œë˜ì•¼ í•˜ëŠ”ë° ê·¸ë ‡ì§€ ì•Šê²Œ ë  ê²½ìš° ë°œìƒí•  ìˆ˜ ìˆëŠ” ìœ„í—˜ì„±ë“¤ì´ë¼ë˜ê°€..

 ê²°êµ­ ì¸ìŠ¤íƒ€ê·¸ë¨ ê²Œì‹œê¸€ì€ ì¤‘ê°„ Secondary tableì„ ë§Œë“¤ì–´ì„œ ê´€ê³„ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì„ ë§Œë“¤ì—ˆë‹¤. ê½¤ ê´œì°®ì€ ìƒê°ì´ë¼ ëŠê¼ˆë˜ê²Œ, ì‹¤ì œë¡œ ì € ë‘˜ì€ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë‹¤ ë³´ë‹ˆ ì´ê²Œ ìµœì„ ì´ì—ˆë‹¤. ë„¤ì´ë²„ í”„ë¡œë•íŠ¸ë„ ê·¸ëƒ¥ ê´€ê³„ë¥¼ ë§ºì–´ì£¼ë˜, ì„œë¡œì˜ ì‚­ì œì— ê´€ì—¬í•˜ì§€ ì•Šë„ë¡ë§Œ ì„¤ì •í•´ì£¼ì—ˆë‹¤. ì‚­ì œëŠ” ê´€ê³„ë§Œ ëŠê³ , ì›ë˜ ë°ì´í„°ëŠ” ê±´ë“œë¦¬ì§€ ì•Šë„ë¡!

 ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ì§€ê¸ˆê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ë©´ì„œ ì—¬ëŸ¬ relationshipì„ ë§Œë“¤ì–´ì™”ì—ˆëŠ”ë°, ì–´ë–¤ íŠ¹ì„±ì´ ì–´ë–»ê²Œ ì“°ì´ëŠ” ê±´ì§€ ì „í˜€ ëª¨ë¥´ê³  ìˆì—ˆë‹¤ëŠ” ê±¸ ì•Œì•˜ë‹¤.. ê·¸ë˜ì„œ ì¢€ ì°¾ì•„ë´¤ë‹¤.

### uselist

```python

class Parent(Base):
    __tablename__ = 'parent'

    id = Column(Integer, primary_key=True)
    # Childì™€ì˜ ê´€ê³„ ì •ì˜
    children = relationship('Child', back_populates='parent')

class Child(Base):
    __tablename__ = 'child'

    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('parent.id'))
    # Parentì™€ì˜ ê´€ê³„ ì •ì˜
    parent = relationship('Parent', back_populates='children')
```

 ìœ„ì—ëŠ” ë¶€ëª¨ í…Œì´ë¸”ê³¼ ìì‹ í…Œì´ë¸”ì´ë‹¤. ì–‘ìª½ ëª¨ë‘ì— ê´€ê³„ë¥¼ ëª…ì‹œí–ˆëŠ”ë°, idë¥¼ primary_keyë¡œ ê°€ì§„ parentê°€ ë¶€ëª¨í…Œì´ë¸”ì´ ë˜ê³ , ê·¸ í‚¤ë¥¼ foreign_key(ì™¸ë˜í‚¤)ë¡œ ê°€ì§„ chile í…Œì´ë¸”ì´ ìì‹ í…Œì´ë¸”ì´ ëœë‹¤. ì—¬ê¸°ì„œ uselistê°€ ìˆë˜ ì—†ë˜ ê¸°ëŠ¥ìƒìœ¼ë¡œëŠ” ì•„ë¬´ ë¬¸ì œê°€ ì—†ë‹¤.. ì–´ì©ì§€ ë‚´ê°€ ì–¸ì œëŠ” ì“°ê³  ì–¸ì œëŠ” ì•ˆì¼ëŠ”ë° ì•„ë¬´ ì´ìƒì´ ì—†ë”ë¼ë‹ˆâ€¦ uselistëŠ” ORMì—ì„œë§Œ ì‘ë™í•˜ëŠ” ì˜µì…˜ì´ê³  ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ìƒìœ¼ë¡œ í…Œì´ë¸”ê°„ì˜ ê´€ê³„ë¥¼ ì„¤ì •í•˜ì§€ëŠ” ëª»í•´ì„œ ì˜ë¯¸ê°€ ì—†ë‹¤ê³  í•œë‹¤. ë‹¨, ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì¸ë‹¤ê³¤ í•˜ëŠ”ë° í ..

 uselistë¥¼ ì¨ì„œ ê°€ë…ì„±ì„ ë†’ì´ë©´ ì•„ë˜ì²˜ëŸ¼ ì“°ë©´ ëœë‹¤.

```python
class Parent(Base):
    __tablename__ = 'parent'

    id = Column(Integer, primary_key=True)
    # Childì™€ì˜ ê´€ê³„ ì •ì˜, ìì‹ì€ "ì—¬ëŸ¬ ëª…" ì´ë‹ˆ uselist=True
    children = relationship('Child', back_populates='parent', uselist=True)

class Child(Base):
    __tablename__ = 'child'

    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('parent.id'))
    # Parentì™€ì˜ ê´€ê³„ ì •ì˜, ê°€ê¸‰ì  ë¶€ëª¨ëŠ” ë§ì§€ ì•Šì€ê²Œ ì¢‹ìœ¼ë‹ˆ uselist=False
    parent = relationship('Parent', back_populates='children', uselist=False)
```

### passive_delete ì™€ ondelete=â€CASCADEâ€

```python
class Parent(Base):
    __tablename__ = 'parent'

    id = Column(Integer, primary_key=True)
    # Childì™€ì˜ ê´€ê³„ ì •ì˜
    children = relationship(
        'Child',
        back_populates='parent',
        passive_deletes=True  # ì‚­ì œ ì‹œ ë™ì‘ ì„¤ì •
    )

class Child(Base):
    __tablename__ = 'child'

    id = Column(Integer, primary_key=True)
    parent_id = Column(
        Integer,
        ForeignKey('parent.id', ondelete='CASCADE')  # ì™¸ë˜ í‚¤ì— ondelete ì˜µì…˜ ì¶”ê°€
    )
    # Parentì™€ì˜ ê´€ê³„ ì •ì˜
    parent = relationship('Parent', back_populates='children')
```

passive_delete ëŠ” ORM ìˆ˜ì¤€ì—ì„œ ì‘ë™í•œë‹¤. ë¶€ëª¨ ê°ì²´ë¥¼ ì‚­ì œí–ˆì„ ë–„ ORMì´ ìì‹ê°ì²´ë„ ì‚­ì œí•˜ëŠ” ì¿¼ë¦¬ë¬¸ì„ ìƒì„±í•˜ì§€ ì•Šë„ë¡ í•´ì¤€ë‹¤. ì•Œì•„ì„œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‚­ì œí•˜ë„ë¡ ëƒ…ë‘”ë‹¤ëŠ” ì˜ë¯¸ë‹¤. ë”°ë¼ì„œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì•Œì•„ì„œ ì‚­ì œí•˜ë„ë¡ ì˜ ì •ì˜ê°€ ë˜ìˆì–´ì•¼ í•˜ëŠ”ë°, ê·¸ê²Œ `ondelete="CASCADE"` ë‹¤.

 passive_deleteëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ê²Œ ì‚­ì œí•˜ë¼ê³  ëª…ë ¹í•˜ì§€ ì•Šê³ , ëƒ…ë‘ëŠ” ì„¤ì •ì´ë¯€ë¡œ ë°˜ë“œì‹œ ondeleteê°€ ìˆì–´ì•¼ í•œë‹¤. ê²½ìš°ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ëœë‹¤

1. `ondelete="CASCADE"` ì—†ì´ `passive_deletes=True`ë§Œ ì„¤ì •
    1. ORM: â€œë°ì´í„°ë² ì´ìŠ¤ê°€ ì‚­ì œí•˜ê² ì§€. ìì‹ ì‚­ì œí•˜ëŠ” ì¿¼ë¦¬ë¬¸ì€ ë³´ë‚´ì§€ ë§ìâ€
    2. DB: â€œëª°?ë£¨â€
    3. ê²°ë¡  : ëŒ€ì°¸ì‚¬ë‚¨
2. `ondelete="CASCADE"`ë¥¼ ì„¤ì •í•˜ê³  `passive_deletes=True`ë„ ì„¤ì •
    1. ORM: â€œë°ì´í„°ë² ì´ìŠ¤ê°€ ì‚­ì œí•˜ê² ì§€. ìì‹ ì‚­ì œí•˜ëŠ” ì¿¼ë¦¬ë¬¸ì€ ë³´ë‚´ì§€ ë§ìâ€
    2. DB: â€œì‚¬ì „ì— ì•½ì†í•œëŒ€ë¡œ ë¶€ëª¨ê°€ ì‚­ì œëìœ¼ë‹ˆ ì•Œì•„ì„œ ìì‹ë„ ì‚­ì œí•˜ìâ€
    3. ê²°ë¡  : ê¹”ë”. ì‚­ì œë„ ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì²˜ë¦¬ë˜ë‹ˆ ì„±ëŠ¥ë„ ì¢‹ìŒ
3. `ondelete="CASCADE"`ë¥¼ ì„¤ì •í•˜ì§€ ì•Šê³  `passive_deletes`ë„ ì„¤ì •í•˜ì§€ ì•ŠìŒ
    1. ORM: â€œë¶€ëª¨ ê°ì²´ê°€ ì‚­ì œëìœ¼ë‹ˆ ë°ì´í„°ë² ì´ìŠ¤í•œí…Œ ìì‹ë„ ì‚­ì œí•˜ë¼ê³  ë§í•´ì£¼ìâ€
    2. DB: â€œã…‡ã…‹ ì‚­ì œí•˜ê² ìŒâ€
    3. ê²°ë¡  : ë¬¸ì œëŠ” ì—†ìŒ. ë‹¤ë§Œ ì¿¼ë¦¬ê°€ ì¶”ê°€ë¡œ ë³´ë‚´ì§€ë‹ˆ 2ë³´ë‹¨ ì„±ëŠ¥ì€ ë‚®ìŒ

ê·¸ë ‡ë‹¤ë©´ ë™ë“±í•œ í…Œì´ë¸”ì—ì„œ ê´€ê³„ëŠ” ëŠì§€ë§Œ ë°ì´í„°ëŠ” ì‚­ì œí•˜ì§€ ì•Šìœ¼ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ê´€ê³„ê°€ ëŠì–´ì§€ë©´ nullë¡œ ì„¤ì •í•˜ë„ë¡ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.

```python
class Employee(Base):
    __tablename__ = 'employee'
    id = Column(Integer, primary_key=True)
    name = Column(String)

    project_id = Column(
        Integer,
        ForeignKey('project.id', ondelete='SET NULL'),
        nullable=True
    )

    # Projectì™€ì˜ ê´€ê³„ ì„¤ì •
    project = relationship(
        'Project',
        back_populates='employees',
        passive_deletes=True
    )

class Project(Base):
    __tablename__ = 'project'
    id = Column(Integer, primary_key=True)
    title = Column(String)

    # Employeeì™€ì˜ ê´€ê³„ ì„¤ì •
    employees = relationship(
        'Employee',
        back_populates='project',
        passive_deletes=True
    )
```

ì´ë ‡ê²Œ ë˜ì—ˆì„ ë•Œ, í”„ë¡œì íŠ¸ê°€ ì‚­ì œë˜ë”ë¼ë„ ê´€ê³„ëœ ì§ì›ì€ ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤. ë°˜ëŒ€ë¡œ í”„ë¡œì íŠ¸ê°€ ì‚­ì œë˜ë„ ì§ì›ì€ ì•„ë¬´ ì˜í–¥ì„ ì•ˆë°›ëŠ”ë‹¤. `passive_delete=True` ëŠ” ì„œë¡œ ì‚­ì œì˜ ì˜í–¥ì„ ì•ˆì£¼ê¸° ìœ„í•´ ê¼­ ì‘ì„±í•´ì•¼ í•œë‹¤. ì €ê±¸ ì•ˆì“°ë©´ í•œìª½ì´ ì‚­ì œë˜ëŠ” ìˆœê°„ ORMì´ â€œì•¼ ê´€ê³„ëœê²ƒë„ ì‚­ì œí•´ë¼â€ ë¼ê³  ì¿¼ë¦¬ë¬¸ì„ ì¶”ê°€ë¡œ ë³´ë‚¸ë‹¤!

### GPT ê¸¸ë“¤ì´ê¸°

ê³ ê°ë‹˜ì˜ ì¸ìŠ¤íƒ€ ê³„ì •ì—ì„œ ì¢‹ì€ ëŒ“ê¸€ì„ ê³¨ë¼ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤. ë‚´ê°€ í•  ìˆœ ì—†ìœ¼ë‹ˆ GPTì—ê²Œ ë¶€íƒí•´ì•¼ í•œë‹¤. ì´ì „ì— ì•Œë¦¬ìµìŠ¤í”„ë ˆìŠ¤ì—ì„œ ë¦¬ë·°ë¥¼ ê°€ì ¸ì™€ ë¶„ì„í•  ë•Œë„ ì‚¬ìš©í–ˆì—ˆëŠ”ë° ë¬¸ì œê°€ ìˆì—ˆë‹¤. ë§¤ë²ˆ GPTì—ê²Œ ëª…ë ¹ì„ í•´ì•¼í•œë‹¤. â€œë‚´ê°€ ì…ë ¥í•œ ëŒ“ê¸€ë“¤ ì¤‘ì—ì„œ 10ê°œë¥¼ ë½‘ì•„ì•¼ í•˜ëŠ”ë° ë¶€ì •ì ì¸ê±´ ë½‘ì§€ ë§ê³ , ê·¸ë ‡ë‹¤ê³  ë¬´ì¡°ê±´ ì¢‹ë‹¤ëŠ” ë‚´ìš©ë§Œ ë½‘ê¸°ë³´ë‹¤ëŠ” ì¢€ ì •ì„±ê» ì˜ì“°ì¸ ì‹¤ì‚¬ìš© í›„ê¸°ê°™ì€ ê²ƒì§€ ëŒ€ë‹µí•´ë´. ê·¼ë° ë‹µë³€ì€ good, bad ë‘˜ì¤‘ í•˜ë‚˜ë¡œë§Œ í•´â€ ë¼ê³  ë§¤ë²ˆ ìš”ì²­í•  ìˆœ ì—†ë‹¤. ì…ë ¥ í† í° ê°’ ë•Œë¬¸ì— ë¹„ìš©ì´ ì–´ë§ˆë¬´ì‹œí•  ê±°ë‹¤.. ê·¸ë¦¬ê³  ê²½í—˜ìƒ GPTëŠ” ì´ë ‡ê²Œ ëŒ€ë‹µí• ê±°ë‹¤.

> â€œì…ë ¥í•œ ëŒ“ê¸€ë“¤ ì¤‘, ë¶€ì •ì ì´ì§€ ì•Šìœ¼ë©´ì„œ ì‹¤ì‚¬ìš© í›„ê¸°ì— ê°€ê¹Œìš´ ëŒ“ê¸€ì¸ì§€ í™•ì¸í•˜ê³  ë§ë‹¤ë©´ good, ì•„ë‹ˆë©´ badë¼ê³  ëŒ€ë‹µí•˜ë¼ê³  í•˜ì…¨ìŠµë‹ˆë‹¤.â€
â€badâ€
> 

ì € ì“°ì˜ë°ê¸° ì—†ëŠ” ìœ—ë¬¸ì¥ë„ ì‹¹ë‹¤ ëˆì´ë‹¤. ê·¸ë˜ì„œ ì´ë²ˆì—” íŒŒì¸íŠœë‹(fine-tuning)ì„ í•´ë´¤ë‹¤. AIê°€ ë‚´ê°€ ì›í•˜ëŠ” ë°©ì‹ëŒ€ë¡œ ì‘ë™í•˜ë„ë¡, ë‚´ê°€ ì‚¬ìš©í•˜ë ¤ëŠ” ê¸°ëŠ¥ì„ ë” ì •í™•í•˜ê³  ì¼ê´€ì„±ìˆê²Œ ìˆ˜í–‰í•˜ë„ë¡ íŠ¸ë ˆì´ë‹ ì‹œí‚¤ëŠ” ì‘ì—…ì´ë‹¤. 

```python
ì½”ë“œ ë¹„ê³µê°œ
```

`create_file` ì„ ì‹¤í–‰í•˜ë©´ openAI ì„œë²„ì— í›ˆë ¨ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤. í›ˆë ¨ë°ì´í„°ëŠ” jsonl í˜•ì‹ì´ì–´ì•¼ í•œë‹¤.

```json
{"messages": [{"role": "user", "content": "ì™€â€¦ ì´ê±¸ ì–´ë–»ê²Œ ê³¨ë¼ìš”â€¦ ë‚œ ëª»í•´ â€¦ğŸ˜¢ë„˜ ì´ë»ì„œ ì—„ë§ˆê°€ ë‹¤ íƒë‚˜ë„¤ìš”. ì—„ë§ˆêº¼ë„ ìˆìœ¼ë©´ ì°¸ ì¢‹ê² ë‹¤ì•„ğŸ§ğŸ–¤"}, {"role": "assistant", "content": "good"}]}
{"messages": [{"role": "user","content": "í”„ë¦¬ì˜¤ë”ë„ í’ˆì ˆì´ì—ìš”ğŸ˜­ğŸ˜­"},{"role": "assistant","content": "bad"}]}

```

JSONL ì´ë‹ˆ í•œì¤„ì´ í•˜ë‚˜ì˜ ë°ì´í„°ë¡œ ì¸ì‹ëœë‹¤. ì—¬ëŸ¬ ë©”ì‹œì§€ë“¤ë¡œ êµ¬ì„±ë˜ëŠ”ë°, ìœ ì €ì˜ ì…ë ¥ê³¼ ê·¸ì— ëŒ€í•œ ì‘ë‹µê°’ìœ¼ë¡œ êµ¬ì„±ëœ í”„ë¡¬í”„íŠ¸ ë°ì´í„°ë‹¤. ìµœì†Œ 10ê°œì˜ ë°ì´í„°ëŠ” ì œê³µí•´ì•¼ í•˜ê³ , 50ê°œ ì´ìƒì˜ ì§ˆ ì¢‹ì€ í”„ë¡¬í”„íŠ¸ë¥¼ ì œê³µí•˜ë©´ ì›¬ë§Œí•˜ë©´ ì˜ ì‘ë™í•œë‹¤ê³  í•œë‹¤. 

ì‘ë‹µì€ ë‹¤ìŒê³¼ ê°™ì´ ì˜¨ë‹¤.

```bash

FileObject(
	id='***', 
	bytes=7910, 
	created_at=1728546887, 
	filename='file_training.jsonl', 
	object='file', 
	purpose='fine-tune', 
	status='processed', 
	status_details=None
)

```

ë‚´ê°€ ì—…ë¡œë“œí•œ íŒŒì¼ idë¥¼ ì…ë ¥í•´ì„œ íŒŒì¸íŠœë‹ ì‘ì—…ì„ ì‹œì‘í•˜ë¼ê³  í•˜ë©´ ëœë‹¤(`fine_tuning()`).

```bash
 FineTuningJob(
	 id='***', 
	 created_at=1728547056, 
	 error=Error(code=None, 
	 message=None, 
	 param=None
	), 
	fine_tuned_model=None, 
	finished_at=None, 
	hyperparameters=Hyperparameters(
		n_epochs='auto', 
		batch_size='auto', 
		learning_rate_multiplier='auto'
	), 
	model='gpt-4o-mini-2024-07-18', 
	object='fine_tuning.job', 
	organization_id='***', 
	result_files=[], 
	seed=1093597155, 
	status='validating_files', # í›ˆë ¨ ë°ì´í„° ì–‘ì‹ì´ ì œëŒ€ë¡œ ëœê±´ì§€ í™•ì¸í•˜ëŠ” ì¤‘.
	trained_tokens=None, 
	training_file='***', 
	validation_file=None, 
	estimated_finish=None, 
	integrations=[], 
	user_provided_suffix=None
)

```

ì˜ ì‘ë™í•˜ë©´ APIë¡œ ì´ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ëª¨ë¸ëª…ì„ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆì§€ë§Œ, openAIëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸í•  ìˆ˜ë„ ìˆë‹¤.

ì´ì œ ì…ë ¥í•´ì„œ íŒë‹¨ì„ ë“¤ì–´ë³´ê³ , í† í° ìˆ˜ëŠ” ì–¼ë§ˆë‚˜ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì

```python
def test_openai(comment: str):
    """
    ì˜¤í”ˆAI í…ŒìŠ¤íŠ¸ API
    """
    robot = ChatGPTProcessor()
    res = robot.make_judgement(comment=comment)
    length = robot.calculate_tokens(comment=comment)
    return {"íŒë‹¨": res, "í† í° ê¸¸ì´": length}

test_oepnai(comment="ë„ˆë¬´ ë§˜ì—ë“œëŠ” ì˜·ì…ë‹ˆë‹¤! ê·¼ë° ì‚¬ì¥ë‹˜ ìˆœëŒ€êµ­ ì¢‹ì•„í•˜ì„¸ìš”?")

# ê²°ê³¼
{
  "íŒë‹¨": "bad",
  "í† í° ê¸¸ì´": 21
}
```

í•©-ê²©

## íšŒê³ 

ì•Œì°¬ í•˜ë£¨!