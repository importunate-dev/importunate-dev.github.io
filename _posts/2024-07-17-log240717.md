---
layout: post
title: ' 테스트서버 배포하기 '
subtitle: ' 2024년 7월 17일 수요일 '
catalog: true
category: log
subcategory: weekly
tags:
  - log
  - weekly
  - july
  - 2024

---

# Today I Learned

## 날짜

2024년 7월 17일 수요일

## 내용

### 테섭 배포

 로컬에서 기능 구현이 끝나고 테스트 서버 배포를 했다. 주기적으로 많은 데이터를 한번에 처리해야 하는 만큼, 로컬이 아닌 환경에서 돌려보는게 중요하다고 생각했다. 글로벌 처음 왔을 때, 우리 서비스가 어떤 AWS를 어떻게 쓰고있는지 궁금해서 혼자 사이드 프로젝트로 따라해봤었는데 그 경험이 정말 도움이 많이 되고있다. 그떄 3달간 요금이 70 나와서 아마존에 메일보내긴 했지만… 일단 VPC, RDS, KMS, S3, ECS, ECR 이것저것 없는것 빼고 다 했다.

 배포해놨는데 테섭에서만 구글 로그인이 작동하지 않았다. 구글쪽에 보내준 리다이렉트 URI가 골떄리게 들어왔다. 리다이렉트치라고 보내준 주소에다가 요청을 보내질 않나(프론트 주소에다가 요청을 왜보내냐), 리다이렉트 주소를 쿼리파라미터로 보내서 살다살다 처음보는 URL로 리다이렉트 시키질 않나… 열심히 코드를 뜯어본 결과, 

1. 구글쪽에 토큰을 요청할 때 데이터를 body가 아닌 param으로 담아야 함
2. 프론트쪽 서버 URL에 https 가 담기지 않아 CRUD 요청이 이상하게 보내졌음.

가 문제였다. 겨우 해결.

## 회고

이거한다고 성능테스트 못했다…