---
layout: post
title: ' 실서버 배포 1차시도 실패 '
subtitle: ' 2024년 5월 29일 수요일 '
catalog: true
category: log
subcategory: weekly
tags:
  - log
  - weekly
  - may
  - 2024

---

# Today I Learned

## 날짜

2024년 5월 29일 수요일

## 내용

### 실서버 배포

 오늘 처음으로 내가 실서버를 배포했다. 뭐 잘못될까봐 무서운데 여러모로 크고 작은 문제를 겪었다. EC2 인스턴스 내에서 데이터베이스 마이그레이션을 하는데, 파일 수정이 안됐다. alembic으로 새로운 변경을 적용할떄 보통 Enum 타입이 오류가 많이난다. 오늘도 나서, 해당 부분을 수정했는데 파일 저장이 안됐다. 파일을 읽고 쓸 권한이 없다고 경고창이 떴다. 전체 디렉토리, 특정 파일 모두 chmod로 권한을 줬으나 잘 안되다 갑자기 됐다. 지 맘대로여 아주..

 혹여나 하는 마음에 배포된 실서버에 접속했더니 거의 대부분 요청이 404를 띄웠다. 500도 아니고 스토어를 찾지 못했다고 뜨는 오류였다. 

1. 우리 서비스는 요청에서 shop에대해 보통 shop access code를 주고받는다.
2. 이번 스프린트에서 글자수가 수정됐다.6글자에서 8글자로 늘어났다.
3. 리뷰서버에선 샵정보를 Redis에 있는 key와 value로 조회한다.
4. 데이터베이스는 업데이트해서 8글자 짜리 access_code를 가졌으나 redis에선 그 새로운 access_code로 정보를 찾을 수 없다.
5. Reids에 shop access cde를 변경해주었더니 모두 해결됐다.

## 회고

식겁했다… 작성할 문서는 TIL로 충분하다.